webpackJsonp([1],{383:function(e,t,o){o(396);var a=o(147)(o(393),o(413),null,null);a.options.__file="D:\\SVN\\B06.svn管理面板V2.0\\09.软件开发\\01.web\\src\\views\\systemLog\\index.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},393:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{pageCurrentLog:1,pageSizeLog:10,totalLog:0,searchKeywordLog:"",loadingGetLogList:!0,loadingClearLogs:!1,tableColumnLog:[{title:"序号",type:"index",fixed:"left",minWidth:80},{title:"操作人",key:"log_add_user_name",minWidth:120},{title:"日志类型",key:"log_type_name",minWidth:150},{title:"详细信息",key:"log_content",tooltip:!0,minWidth:120},{title:"操作时间",key:"log_add_time",minWidth:150}],tableDataLog:[]}},computed:{},created:function(){},mounted:function(){this.GetLogList()},methods:{LogPageSizeChange:function(e){this.pageSizeLog=e,this.GetLogList()},LogPageChange:function(e){this.pageCurrentLog=e,this.GetLogList()},SearchGetLogList:function(){this.GetLogList()},GetLogList:function(){var e=this;e.loadingGetLogList=!0,e.tableDataLog=[];var t={pageSize:e.pageSizeLog,currentPage:e.pageCurrentLog,searchKeyword:e.searchKeywordLog};e.$axios.post("/api.php?c=Logs&a=GetLogList&t=web",t).then(function(t){e.loadingGetLogList=!1;var o=t.data;1==o.status?(e.tableDataLog=o.data.data,e.totalLog=o.data.total):e.$Message.error(o.message)}).catch(function(t){e.loadingGetLogList=!1,console.log(t),e.$Message.error("出错了 请联系管理员！")})},ClearLogs:function(){var e=this;e.$Modal.confirm({title:"清空日志",content:"确定要清空日志记录吗？此操作不可逆！",onOk:function(){e.loadingClearLogs=!0;var t={};e.$axios.post("/api.php?c=Logs&a=ClearLogs&t=web",t).then(function(t){e.loadingClearLogs=!1;var o=t.data;1==o.status?(e.$Message.success(o.message),e.GetLogList()):e.$Message.error(o.message)}).catch(function(t){e.loadingClearLogs=!1,console.log(t),e.$Message.error("出错了 请联系管理员！")})}})},ExportLog:function(){var e=this;o.e(10).then(function(){var t=o(394),a=t.export_json_to_excel,n=["序号","操作人","日志类型","详细信息","操作时间"],s=["index","log_add_user_name","log_type_name","log_content","log_add_time"],i=e.tableDataLog;for(var r in i)i[r].index=parseInt(r)+1;a(n,e.FormatJson(s,i),"logs-"+new Date)}.bind(null,o)).catch(o.oe)},FormatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})}}}},396:function(e,t){},413:function(e,t,o){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("Card",{attrs:{bordered:!1,"dis-hover":!0}},[o("Row",{staticStyle:{"margin-bottom":"15px"}},[o("Col",{attrs:{type:"flex",justify:"space-between",xs:21,sm:20,md:19,lg:18}},[o("Button",{attrs:{icon:"ios-trash-outline",type:"warning",ghost:"",loading:e.loadingClearLogs},on:{click:e.ClearLogs}},[e._v("清空日志")]),e._v(" "),o("Button",{attrs:{icon:"ios-cloud-download-outline",type:"success",ghost:""},on:{click:e.ExportLog}},[e._v("导出日志")])],1),e._v(" "),o("Col",{attrs:{xs:3,sm:4,md:5,lg:6}},[o("Input",{staticStyle:{width:"100%"},attrs:{search:"","enter-button":"",placeholder:"通过所有信息搜索..."},on:{"on-search":e.SearchGetLogList},model:{value:e.searchKeywordLog,callback:function(t){e.searchKeywordLog=t},expression:"searchKeywordLog"}})],1)],1),e._v(" "),o("Table",{attrs:{border:"",loading:e.loadingGetLogList,columns:e.tableColumnLog,data:e.tableDataLog,size:"small"}}),e._v(" "),o("Card",{attrs:{bordered:!1,"dis-hover":!0}},[0!=e.totalLog?o("Page",{attrs:{total:e.totalLog,current:e.pageCurrentLog,"page-size":e.pageSizeLog,size:"small","show-sizer":""},on:{"on-page-size-change":e.LogPageSizeChange,"on-change":e.LogPageChange}}):e._e()],1)],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});