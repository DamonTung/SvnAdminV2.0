webpackJsonp([6],{378:function(e,o,r){r(403);var s=r(147)(r(388),r(417),null,null);s.options.__file="D:\\SVN\\B06.svn管理面板V2.0\\09.软件开发\\01.web\\src\\views\\login\\index.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},388:function(e,o,r){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.default={data:function(){return{loadingGetVerifyCode:"loading......",loadingLogin:!1,verifyOption:!1,formUserLogin:{user_name:"",user_pass:"",user_role:"2",code:"",uuid:"",base64:""},ruleValidateLogin:{user_name:[{required:!0,message:"用户名不能为空",trigger:"blur"}],user_pass:[{required:!0,message:"密码不能为空",trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}}},computed:{},created:function(){},mounted:function(){var e=this;sessionStorage.token?(e.$Message.success("已有登录信息 自动跳转中..."),setTimeout(function(){1==sessionStorage.user_role_id?e.$router.push({name:"index"}):2==sessionStorage.user_role_id&&e.$router.push({name:"repositoryInfo"})},2e3)):e.GetVerifyOption()},methods:{Submit:function(e){var o=this;this.$refs[e].validate(function(e){if(!e)return!1;o.Login()})},GetVerifyOption:function(){var e=this,o={};e.$axios.post("/api.php?c=Safe&a=GetVerifyOption&t=web",o).then(function(o){var r=o.data;1==r.status?1==r.data.enable?(e.verifyOption=!0,e.GetVerifyCode()):e.verifyOption=!1:e.$Message.error(r.message)}).catch(function(o){console.log(o),e.$Message.error("出错了 请联系管理员！")})},GetVerifyCode:function(){var e=this;e.formUserLogin.base64="",e.loadingGetVerifyCode="loading......";var o={};e.$axios.post("/api.php?c=Common&a=GetVerifyCode&t=web",o).then(function(o){var r=o.data;1==r.status?(e.formUserLogin.uuid=r.data.uuid,e.formUserLogin.base64=r.data.base64):e.$Message.error(r.message)}).catch(function(o){console.log(o),e.$Message.error("出错了 请联系管理员！")})},Login:function(){var e=this;e.loadingLogin=!0;var o={user_name:e.formUserLogin.user_name,user_pass:e.formUserLogin.user_pass,user_role:e.formUserLogin.user_role,uuid:e.formUserLogin.uuid,code:e.formUserLogin.code};e.$axios.post("/api.php?c=Common&a=Login&t=web",o).then(function(o){e.loadingLogin=!1;var r=o.data;1==r.status?(sessionStorage.setItem("token",r.data.token),sessionStorage.setItem("user_name",r.data.user_name),sessionStorage.setItem("user_role_id",r.data.user_role_id),sessionStorage.setItem("user_role_name",r.data.user_role_name),e.$Message.success(r.message),1==r.data.user_role_id?e.$router.push({name:"index"}):2==r.data.user_role_id&&e.$router.push({name:"repositoryInfo"})):(e.GetVerifyCode(),e.$Message.error(r.message))}).catch(function(o){e.loadingLogin=!1,console.log(o),e.$Message.error("出错了 请联系管理员！")})}}}},403:function(e,o){},417:function(e,o,r){e.exports={render:function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{staticClass:"login"},[r("div",{staticClass:"login-con"},[r("Card",{attrs:{icon:"log-in",title:"SVNAdmin V2.3.1",bordered:!1}},[r("div",{staticClass:"form-con"},[r("Form",{ref:"formUserLogin",attrs:{model:e.formUserLogin,rules:e.ruleValidateLogin},nativeOn:{keydown:function(o){if(!("button"in o)&&e._k(o.keyCode,"enter",13,o.key,"Enter"))return null;e.Submit("formUserLogin")}}},[r("FormItem",{attrs:{prop:"user_name"}},[r("Input",{attrs:{placeholder:"请输入用户名"},model:{value:e.formUserLogin.user_name,callback:function(o){e.$set(e.formUserLogin,"user_name",o)},expression:"formUserLogin.user_name"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),e._v(" "),r("FormItem",{attrs:{prop:"user_pass"}},[r("Input",{attrs:{type:"password",password:"",placeholder:"请输入密码"},model:{value:e.formUserLogin.user_pass,callback:function(o){e.$set(e.formUserLogin,"user_pass",o)},expression:"formUserLogin.user_pass"}},[r("span",{attrs:{slot:"prepend"},slot:"prepend"},[r("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),e._v(" "),r("FormItem",[r("Select",{attrs:{transfer:!0},model:{value:e.formUserLogin.user_role,callback:function(o){e.$set(e.formUserLogin,"user_role",o)},expression:"formUserLogin.user_role"}},[r("Option",{attrs:{value:"1"}},[e._v("管理人员")]),e._v(" "),r("Option",{attrs:{value:"2"}},[e._v("SVN用户")])],1)],1),e._v(" "),e.verifyOption?r("FormItem",{attrs:{prop:"code"}},[r("Row",[r("Col",{attrs:{span:"11"}},[r("Input",{attrs:{placeholder:"请输入验证码"},model:{value:e.formUserLogin.code,callback:function(o){e.$set(e.formUserLogin,"code",o)},expression:"formUserLogin.code"}})],1),e._v(" "),r("Col",{attrs:{span:"1"}}),e._v(" "),r("Col",{attrs:{span:"12"}},[r("img",{staticStyle:{width:"100%",cursor:"pointer"},attrs:{src:e.formUserLogin.base64,alt:e.loadingGetVerifyCode},on:{click:e.GetVerifyCode}})])],1)],1):e._e(),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",long:"",loading:e.loadingLogin},on:{click:function(o){e.Submit("formUserLogin")}}},[e._v("登录")])],1)],1)],1)])],1)])},staticRenderFns:[]},e.exports.render._withStripped=!0}});